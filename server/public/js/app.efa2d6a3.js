(function(e){function t(t){for(var n,o,c=t[0],i=t[1],u=t[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==r[i]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"00b6":function(e,t,a){},1195:function(e,t,a){e.exports=a.p+"img/avatar.d2c893f5.png"},1453:function(e,t,a){"use strict";a("99af");var n=a("d4ec"),r=a("bee2"),s=a("bc3a"),o=a.n(s),c=function(){function e(){Object(n["a"])(this,e),this.url=""}return Object(r["a"])(e,[{key:"uploadImage",value:function(e,t){return o.a.post("/images/".concat(t),e,{headers:{"Content-Type":"multipart/form-data"}})}},{key:"getAllImages",value:function(){return o.a.get("/images")}},{key:"getUserImages",value:function(e){return o.a.get("/user/".concat(e,"/images"))}},{key:"likeImage",value:function(e,t){return o.a.post("/image/".concat(e,"/like/").concat(t))}},{key:"deleteImage",value:function(e){return o.a.delete("/user/image/".concat(e))}}]),e}();t["a"]=new c},"16a3":function(e,t,a){"use strict";var n=a("cd8c"),r=a.n(n);r.a},"1b67":function(e,t,a){},"1cd6":function(e,t,a){"use strict";var n=a("8fdf"),r=a.n(n);r.a},"206d":function(e,t,a){"use strict";var n=a("4413"),r=a.n(n);r.a},4413:function(e,t,a){},"4dc3":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-main",[a("Navbar"),a("router-view"),a("Snackbar")],1)],1)},s=[],o=(a("96cf"),a("1da1")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{staticClass:"primary Navbar",attrs:{dark:""}},[a("v-toolbar-title",[e._v("Gallery")]),a("v-spacer"),a("v-list",{staticClass:"list"},[a("v-list-item",{attrs:{router:"",to:{name:"Home"}}},[a("v-icon",[e._v(" fa fa-home ")]),a("v-list-item-title",[e._v("Home")])],1),e.currentUser?a("v-list-item",{attrs:{router:"",to:{name:"Profile"}}},[a("v-icon",[e._v(" fa fa-user ")]),a("v-list-item-title",[e._v("Profile")])],1):e._e(),e.currentUser?e._e():a("v-list-item",{attrs:{router:"",to:{name:"Login"}}},[a("v-icon",[e._v(" fa fa-sign-in ")]),a("v-list-item-title",[e._v("Login")])],1),e.currentUser?e._e():a("v-list-item",{attrs:{router:"",to:{name:"Register"}}},[a("v-icon",[e._v(" fa fa-user-plus ")]),a("v-list-item-title",[e._v("Register")])],1),e.currentUser?a("v-list-item",{on:{click:function(t){return e.logoutMethod()}}},[a("v-icon",[e._v(" fa fa-sign-out ")]),a("v-list-item-title",[e._v("Logout")])],1):e._e()],1)],1)},i=[],u=(a("b0c0"),a("5530")),l=a("2f62"),d={computed:Object(l["c"])(["currentUser"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["d"])(["setCurrentUser","showSnackbar"])),{},{logoutMethod:function(){localStorage.removeItem("token"),this.setCurrentUser(null),this.showSnackbar("You have logged out successfully!"),"Home"!==this.$route.name&&this.$router.push({name:"Home"})}})},f=d,m=(a("16a3"),a("2877")),v=a("6544"),g=a.n(v),p=a("40dc"),h=a("132d"),b=a("8860"),k=a("da13"),w=a("5d23"),_=a("2fa4"),C=a("2a7f"),j=Object(m["a"])(f,c,i,!1,null,null,null),O=j.exports;g()(j,{VAppBar:p["a"],VIcon:h["a"],VList:b["a"],VListItem:k["a"],VListItemTitle:w["a"],VSpacer:_["a"],VToolbarTitle:C["a"]});var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("v-snackbar",{staticClass:"text-center",attrs:{value:e.snackbar}},[e._v(e._s(e.snackbarContent))])],1)},I=[],x={computed:Object(l["c"])(["snackbar","snackbarContent"])},U=x,A=(a("584f"),a("2db4")),V=Object(m["a"])(U,y,I,!1,null,null,null),S=V.exports;g()(V,{VSnackbar:A["a"]});var L={name:"App",components:{Navbar:O,Snackbar:S},computed:Object(l["c"])(["currentUser"]),methods:Object(l["b"])(["getCurrentUser"]),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCurrentUser(localStorage.getItem("token"));case 2:console.log(e.currentUser);case 3:case"end":return t.stop()}}),t)})))()}},M=L,R=a("7496"),P=a("f6c4"),B=Object(m["a"])(M,r,s,!1,null,null,null),$=B.exports;g()(B,{VApp:R["a"],VMain:P["a"]});var E=a("8c4f"),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"Home"},[a("AddImage"),a("Gallery")],1)},T=[],G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"Gallery"},[a("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"images-container"},e._l(e.images,(function(t){return a("div",{key:t._id,staticClass:"image-container"},[a("v-container",{staticClass:"pa-0"},[a("img",{attrs:{src:"/"+t.path}}),a("div",{staticClass:"like"},[e.checkLiked(t.likes)?a("v-btn",{attrs:{icon:"",color:"pink"},on:{click:function(a){return e.likeImage(t._id)}}},[a("v-icon",[e._v("mdi-heart-outline")])],1):e._e(),e.checkLiked(t.likes)?e._e():a("v-btn",{attrs:{icon:"",color:"pink"},on:{click:function(a){return e.likeImage(t._id)}}},[a("v-icon",[e._v("mdi-heart")])],1),a("span",{staticClass:"counter"},[e._v(e._s(t.likes.length))])],1)])],1)})),0)])},H=[],D=a("9a8c"),Y=D["a"],N=(a("5baa"),a("8336")),q=a("a523"),z=Object(m["a"])(Y,G,H,!1,null,null,null),J=z.exports;g()(z,{VBtn:N["a"],VContainer:q["a"],VIcon:h["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"AddImage"},[a("v-form",{staticClass:"d-flex",on:{submit:function(t){return t.preventDefault(),e.uploadImage(t)}}},[a("v-file-input",{attrs:{"show-size":"",name:"image",label:"Choose a photo"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),a("v-btn",{attrs:{loading:e.loading,color:"primary",type:"submit"}},[e._v("Upload")])],1),this.feedback?a("p",{staticClass:"red--text text-center"},[e._v(e._s(this.feedback))]):e._e()],1)},K=[],Q=a("1453"),X={data:function(){return{file:null,loading:!1,feedback:null}},computed:Object(l["c"])(["currentUser"]),methods:Object(u["a"])(Object(u["a"])({},Object(l["d"])(["addImage","showSnackbar"])),{},{uploadImage:function(){var e=this;if(this.file)if(this.currentUser){this.loading=!0,this.feedback=null;var t=new FormData;t.append("image",this.file),Q["a"].uploadImage(t,this.currentUser._id).then((function(t){if(console.log(t.data),t.data.error)return e.loading=!1,e.feedback=t.data.error,!1;e.addImage(t.data),e.showSnackbar("Image uploaded succesfully!"),e.file=null,e.loading=!1})).catch((function(t){e.showSnackbar("Image upload failed!"),console.log(t.message),e.loading=!1}))}else this.feedback="You must login before uploading an image!";else this.feedback="You must choose an image!"}})},Z=X,ee=(a("1cd6"),a("23a7")),te=a("4bd4"),ae=Object(m["a"])(Z,W,K,!1,null,null,null),ne=ae.exports;g()(ae,{VBtn:N["a"],VFileInput:ee["a"],VForm:te["a"]});var re={name:"Home",components:{Gallery:J,AddImage:ne}},se=re,oe=Object(m["a"])(se,F,T,!1,null,null,null),ce=oe.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"Login"},[a("v-card",{staticClass:"login-card"},[a("h1",{staticClass:"primary--text"},[e._v("Login")]),a("v-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("v-text-field",{attrs:{label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",type:e.showPassword?"text":"password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.feedback?a("p",{staticClass:"pink--text text-center"},[e._v(e._s(e.feedback))]):e._e(),a("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loading}},[e._v("Login")])],1)],1)],1)},ue=[],le=a("d4ec"),de=a("bee2"),fe=a("bc3a"),me=a.n(fe),ve=function(){function e(){Object(le["a"])(this,e),this.url=""}return Object(de["a"])(e,[{key:"login",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={email:t,password:a},e.abrupt("return",me.a.post("/user/login",n));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"register",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={name:n,email:t,password:a},e.abrupt("return",me.a.post("/user/register",r));case 2:case"end":return e.stop()}}),e)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"checkAuth",value:function(e){return me.a.post("/user/me",{token:e})}}]),e}(),ge=new ve,pe={name:"Login",data:function(){return{email:"",password:"",showPassword:!1,loading:!1,feedback:null}},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["d"])(["showSnackbar"])),Object(l["b"])(["getCurrentUser"])),{},{login:function(){var e=this;this.loading=!0,this.feedback=null,ge.login(this.email,this.password).then((function(t){if(t.data.error)return console.log(t.data.error),e.loading=!1,e.feedback=t.data.error,!1;localStorage.setItem("token",t.data.token),e.getCurrentUser(t.data.token),e.$router.push({name:"Home"}),e.showSnackbar("You have logged in successfully!"),e.loading=!1})).catch((function(t){console.log(t.message),e.loading=!1,e.feedback="You must provide correct Email & Password"}))}})},he=pe,be=(a("206d"),a("b0af")),ke=a("8654"),we=Object(m["a"])(he,ie,ue,!1,null,null,null),_e=we.exports;g()(we,{VBtn:N["a"],VCard:be["a"],VForm:te["a"],VTextField:ke["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"Register"},[a("v-card",{staticClass:"register-card"},[a("h1",{staticClass:"primary--text"},[e._v("Register")]),a("v-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[a("v-text-field",{attrs:{label:"Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Email",type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",type:e.showPassword?"text":"password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{attrs:{color:"primary",type:"submit",loading:e.loading}},[e._v("Register")])],1)],1)],1)},je=[],Oe={name:"Register",data:function(){return{name:"",email:"",password:"",showPassword:!1,loading:!1}},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["d"])(["showSnackbar"])),Object(l["b"])(["getCurrentUser"])),{},{register:function(){var e=this;this.loading=!0,ge.register(this.email,this.password,this.name).then((function(t){localStorage.setItem("token",t.data.token),e.getCurrentUser(t.data.token),e.showSnackbar("You have created an account successfully!"),e.loading=!1,e.$router.push({name:"Home"})}))}})},ye=Oe,Ie=(a("a894"),Object(m["a"])(ye,Ce,je,!1,null,null,null)),xe=Ie.exports;g()(Ie,{VBtn:N["a"],VCard:be["a"],VForm:te["a"],VTextField:ke["a"]});var Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"Profile"},[n("v-container",[e.currentUser?n("div",{staticClass:"user-name-panel"},[n("div",{staticClass:"avatar-container"},[e.currentUser.avatar?n("img",{staticClass:"avatar",attrs:{src:"/"+e.currentUser.avatar.path}}):e._e(),e.currentUser.avatar?e._e():n("img",{staticClass:"avatar",attrs:{src:a("1195")}}),n("div",{staticClass:"overlay",on:{click:function(t){return e.toggleChangeAvatarModal()}}},[n("v-icon",[e._v("fa fa-edit")])],1)]),n("h1",[e._v(e._s(e.currentUser.name))])]):e._e()]),n("ChangeAvatarModal"),n("ProfileImages")],1)},Ae=[],Ve=a("eb09"),Se=Ve["a"],Le=(a("6346"),Object(m["a"])(Se,Ue,Ae,!1,null,null,null)),Me=Le.exports;g()(Le,{VContainer:q["a"],VIcon:h["a"]});var Re=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"Error"},[a("h1",[e._v("404 Not Found!")])])}],Be=(a("ed39"),{}),$e=Object(m["a"])(Be,Re,Pe,!1,null,null,null),Ee=$e.exports;n["a"].use(E["a"]);var Fe=[{path:"/",name:"Home",component:ce},{path:"/login",name:"Login",component:_e},{path:"/register",name:"Register",component:xe},{path:"/profile",name:"Profile",component:Me},{path:"/404",component:Ee},{path:"*",redirect:"/404"}],Te=new E["a"]({routes:Fe,mode:"history"}),Ge=Te,He={currentUser:null,currentUserImages:null},De={currentUser:function(e){return e.currentUser},userImages:function(e){return e.currentUserImages}},Ye={getCurrentUser:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.commit,!t){a.next=8;break}return a.next=4,ge.checkAuth(t);case 4:r=a.sent,n("setCurrentUser",r.data),a.next=9;break;case 8:n("setCurrentUser",null);case 9:case"end":return a.stop()}}),a)})))()},getCurrentUserImages:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Q["a"].getUserImages(it.getters.currentUser._id);case 3:n=t.sent,a("setCurrentImages",n.data);case 5:case"end":return t.stop()}}),t)})))()},likeImage:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.commit,!it.getters.currentUser){a.next=9;break}return a.next=4,Q["a"].likeImage(t,it.getters.currentUser._id);case 4:a.sent,it.dispatch("getAllImages"),it.dispatch("getCurrentUserImages"),a.next=10;break;case 9:Ge.push({name:"Login"});case 10:case"end":return a.stop()}}),a)})))()}},Ne={setCurrentUser:function(e,t){return e.currentUser=t},setCurrentImages:function(e,t){return e.currentUserImages=t}},qe={state:He,getters:De,actions:Ye,mutations:Ne},ze={images:[]},Je={images:function(e){return e.images}},We={getAllImages:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,Q["a"].getAllImages();case 3:n=t.sent,a("setImages",n.data);case 5:case"end":return t.stop()}}),t)})))()}},Ke={setImages:function(e,t){return e.images=t},addImage:function(e,t){return e.images.unshift(t)}},Qe={state:ze,getters:Je,actions:We,mutations:Ke},Xe={snackbar:!1,snackbarContent:null},Ze={snackbar:function(e){return e.snackbar},snackbarContent:function(e){return e.snackbarContent}},et={},tt={showSnackbar:function(e,t){e.snackbarContent=t,e.snackbar=!0}},at={state:Xe,getters:Ze,actions:et,mutations:tt},nt={changeAvatarModal:!1},rt={changeAvatarModal:function(e){return e.changeAvatarModal}},st={},ot={toggleChangeAvatarModal:function(e){return e.changeAvatarModal=!e.changeAvatarModal}},ct={state:nt,getters:rt,actions:st,mutations:ot};n["a"].use(l["a"]);var it=new l["a"].Store({modules:{currentUser:qe,gallery:Qe,snackbar:at,changeAvatar:ct}}),ut=a("f309");n["a"].use(ut["a"]);var lt=new ut["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:Ge,store:it,vuetify:lt,render:function(e){return e($)}}).$mount("#app")},"584f":function(e,t,a){"use strict";var n=a("dd7c"),r=a.n(n);r.a},"5baa":function(e,t,a){"use strict";var n=a("1b67"),r=a.n(n);r.a},6346:function(e,t,a){"use strict";var n=a("4dc3"),r=a.n(n);r.a},"756b":function(e,t,a){"use strict";var n=a("cc2c"),r=a.n(n);r.a},"8fdf":function(e,t,a){},"95e4":function(e,t,a){},"9a8c":function(e,t,a){"use strict";(function(e){a("a623"),a("d3b7"),a("25f0"),a("96cf");var n=a("1da1"),r=a("5530"),s=(a("0808"),a("6944")),o=a.n(s),c=a("2b0e"),i=a("a92e"),u=a("2f62");a("1157");c["a"].use(o.a),t["a"]={computed:Object(u["c"])(["images","currentUser"]),methods:Object(r["a"])(Object(r["a"])({},Object(u["b"])(["getAllImages","likeImage"])),{},{getBinary:function(t){return e.from(t).toString("base64")},setGridAnimator:function(){var e=document.querySelector(".images-container");Object(i["wrapGrid"])(e,{duration:500})},checkLiked:function(e){var t=this;return e.every((function(e){return e.user!==t.currentUser._id}))}}),created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllImages();case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){this.setGridAnimator()}}}).call(this,a("b639").Buffer)},"9b72":function(e,t,a){"use strict";var n=a("95e4"),r=a.n(n);r.a},a894:function(e,t,a){"use strict";var n=a("db38"),r=a.n(n);r.a},afaf:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"ProfileImages"},[a("h1",[e._v("Your Images")]),a("v-container",{staticClass:"images-container"},e._l(e.userImages,(function(t){return a("div",{key:t._id,staticClass:"image-container"},[a("img",{attrs:{src:"/"+t.path},on:{load:function(t){return e.adjustOverlay(t)}}}),a("div",{staticClass:"overlay"},[a("v-icon",{on:{click:function(a){return e.deleteImage(t._id)}}},[e._v("fa fa-trash")]),a("div",{staticClass:"like"},[e.checkLiked(t.likes)?a("v-btn",{attrs:{icon:"",color:"pink"},on:{click:function(a){return e.likeImage(t._id)}}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-heart-outline")])],1):e._e(),e.checkLiked(t.likes)?e._e():a("v-btn",{attrs:{icon:"",color:"pink"},on:{click:function(a){return e.likeImage(t._id)}}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-heart")])],1),a("span",{staticClass:"counter"},[e._v(e._s(t.likes.length))])],1)],1)])})),0)],1)},r=[],s=(a("a623"),a("5530")),o=a("1157"),c=a.n(o),i=a("1453"),u=a("2f62"),l=a("a92e"),d={data:function(){return{images:null,feedback:null}},computed:Object(u["c"])(["currentUser","userImages"]),methods:Object(s["a"])(Object(s["a"])({},Object(u["b"])(["getCurrentUserImages","likeImage"])),{},{adjustOverlay:function(e){var t=e.target.height;c()(e.target).siblings(".overlay").height(t)},setGridAnimator:function(){var e=document.querySelector(".images-container");Object(l["wrapGrid"])(e,{duration:500})},deleteImage:function(e){var t=this;i["a"].deleteImage(e).then((function(){return t.getCurrentUserImages(t.currentUser)})).catch((function(e){return console.log(e)}))},checkLiked:function(e){var t=this;return e.every((function(e){return e.user!==t.currentUser._id}))}}),mounted:function(){this.getCurrentUserImages(),this.currentUser&&this.getCurrentUserImages()}},f=d,m=(a("9b72"),a("2877")),v=a("6544"),g=a.n(v),p=a("8336"),h=a("a523"),b=a("132d"),k=Object(m["a"])(f,n,r,!1,null,null,null);t["a"]=k.exports;g()(k,{VBtn:p["a"],VContainer:h["a"],VIcon:b["a"]})},cc2c:function(e,t,a){},cd8c:function(e,t,a){},d729:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-dialog",{attrs:{persistent:"",width:"800"},model:{value:e.changeAvatarModal,callback:function(t){e.changeAvatarModal=t},expression:"changeAvatarModal"}},[a("v-card",{staticClass:"modal-card"},[a("v-icon",{staticClass:"close",on:{click:function(t){return e.toggleChangeAvatarModal()}}},[e._v("fa fa-close")]),a("v-card-title",[e._v("Upload your avatar")]),a("v-file-input",{staticClass:"avatar-input",attrs:{label:"Choose your avatar"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),e.avatarSrc?a("div",{staticClass:"img-container"},[a("vue-cropper",{ref:"cropper",attrs:{src:e.avatarSrc,aspectRatio:1,modal:!0,guides:!1,movable:!1,rotatable:!1,scalable:!1,zoomable:!1,minCropBoxWidth:100}})],1):e._e(),a("v-card-actions",[a("v-btn",{staticClass:"success",attrs:{loading:e.saveBtnLoad,disabled:!e.file},on:{click:function(t){return e.saveAvatar()}}},[e._v("Save")]),a("v-btn",{staticClass:"primary",attrs:{dark:"",loading:e.resetBtnLoad},on:{click:function(t){return e.resetAvatar()}}},[e._v("Reset")]),a("v-btn",{attrs:{dark:"",color:"pink"},on:{click:function(t){return e.toggleChangeAvatarModal()}}},[e._v("Close")])],1)],1)],1)],1)},r=[],s=(a("caad"),a("fb6a"),a("b0c0"),a("5530")),o=a("2f62"),c=a("95c3"),i=a.n(c),u=(a("6107"),a("96cf"),a("1da1")),l=a("d4ec"),d=a("bee2"),f=a("bc3a"),m=a.n(f),v=function(){function e(){Object(l["a"])(this,e),this.url=""}return Object(d["a"])(e,[{key:"uploadAvatar",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m.a.patch("/user/me/avatar/"+t,a,{headers:{"Content-Type":"multipart/form-data"}}));case 1:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),g=new v,p={data:function(){return{file:null,avatarSrc:null,saveBtnLoad:!1,resetBtnLoad:!1}},computed:Object(o["c"])(["changeAvatarModal","currentUser"]),components:{VueCropper:i.a},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["d"])(["toggleChangeAvatarModal"])),Object(o["b"])(["getCurrentUser"])),{},{saveAvatar:function(){var e=this;this.saveBtnLoad=!0;this.$refs.cropper.getCroppedCanvas().toBlob((function(t){var a=new FormData;a.append("avatar",t),g.uploadAvatar(e.currentUser._id,a).then((function(t){console.log(t),e.saveBtnLoad=!1,e.toggleChangeAvatarModal(),e.getCurrentUser(localStorage.getItem("token")),e.file=null,e.avatarSrc=null})).catch((function(t){console.log(t),e.saveBtnLoad=!1}))}))},resetAvatar:function(){var e=this;this.resetBtnLoad=!0,g.uploadAvatar(this.currentUser._id,null).then((function(){e.resetBtnLoad=!1,e.getCurrentUser(localStorage.getItem("token")),e.toggleChangeAvatarModal(),e.file=null})).catch((function(t){console.log(t),e.resetBtnLoad=!1}))}}),watch:{file:{handler:function(e){var t=this;if(e){this.avatarSrc=null;var a=[".png",".jpg","jpeg"],n=a.includes(e.name.slice(-4));if(!n)return this.file=null,void console.log(this.file);var r=new FileReader;r.onload=function(){return t.avatarSrc=r.result},r.readAsDataURL(e)}}}}},h=p,b=(a("756b"),a("2877")),k=a("6544"),w=a.n(k),_=a("8336"),C=a("b0af"),j=a("99d9"),O=a("169a"),y=a("23a7"),I=a("132d"),x=a("f6c4"),U=Object(b["a"])(h,n,r,!1,null,null,null);t["a"]=U.exports;w()(U,{VBtn:_["a"],VCard:C["a"],VCardActions:j["a"],VCardTitle:j["b"],VDialog:O["a"],VFileInput:y["a"],VIcon:I["a"],VMain:x["a"]})},db38:function(e,t,a){},dd7c:function(e,t,a){},eb09:function(e,t,a){"use strict";(function(e){a("d3b7"),a("25f0");var n=a("5530"),r=a("d729"),s=a("afaf"),o=a("2f62");t["a"]={name:"Profile",data:function(){return{file:null,showChangeAvatarModal:!1}},components:{ChangeAvatarModal:r["a"],ProfileImages:s["a"]},computed:Object(o["c"])(["currentUser","changeAvatarModal"]),methods:Object(n["a"])(Object(n["a"])({},Object(o["d"])(["toggleChangeAvatarModal"])),{},{getBinary:function(t){return e.from(t).toString("base64")}})}}).call(this,a("b639").Buffer)},ed39:function(e,t,a){"use strict";var n=a("00b6"),r=a.n(n);r.a}});
//# sourceMappingURL=app.efa2d6a3.js.map